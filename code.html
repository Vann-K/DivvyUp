<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divvy Up: A Coding Challenge</title>

    <!-- DEVICONS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">


    <!-- BOOTSTRAP ICONS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <!-- BOOTSTRAP CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <!-- Prism CSS -->
    <link href="/css/prism.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link href="/css/site.css" rel="stylesheet">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark " id="mainNav">
            <div class="container-xxl">
                <a class="navbar-brand" href="/index.html">
                    <img src="/img/Kraken-Footer-Logo.svg" height="50" />
                    <span class="ms-3">Divvy Up</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon-vk">
                        <i class="bi bi-list"></i>
                    </span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link " aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/app.html">App</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/code.html">The Code</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">The Repo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://vkport.netlify.app">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Blog</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="container">

        <div class="row">
            <h1 class="border-bottom border-2 border-dark-subtle">The Code</h1>
            <!-- SOURCE CODE -->
            <div class="col col-12 col-md-8">
                <pre class="line-numbers">
                    <code class="language-js">
                        // Entry Function
// Initial Function that happens when we press Calculate button

<a href="#getValuesSection" class="text-decoration-none" id="getValuesCode">function getValues() {</a>

    // Get inputs, store in object
    let inputsObject = {
        loanAmount: parseInt(document.getElementById('loanAmountInput').value),
        loanTerm: parseInt(document.getElementById('loanTermInput').value),
        interestRate: parseInt(document.getElementById('interestRateInput').value)
    }

    if (isNaN(inputsObject.loanAmount) || isNaN(inputsObject.loanTerm) || isNaN(inputsObject.interestRate)) {
        Swal.fire({
            icon: 'error',
            title: 'Whoops',
            text: 'Please enter a valid number.'
        })
        return;
    }


    // Calculate  Total Monthly Payment, assign to variable
    let totalMonthlyPayment = totalMonthly(inputsObject);


    // Calculate all of the necessary 
    let amortizationDataArray = balanceInterestPrin(inputsObject, totalMonthlyPayment);


    displayCurrentMonth(amortizationDataArray, totalMonthlyPayment, inputsObject);

    displayAmortization(amortizationDataArray);
}


// Logic Functions

<a href="#totalMonthlySection" class="text-decoration-none"><span id="totalMonthlyCode">function totalMonthly(values)</span></a> {
    // Calculate total monthly payment.

    let totalMonthlyPayment = values.loanAmount * (values.interestRate / 1200) / (1 - (1 + values.interestRate / 1200) ** -values.loanTerm)

    return totalMonthlyPayment;
}


<a href="#bIPSection" class="text-decoration-none" id="bIPCode">function balanceInterestPrin(values, totalMonthlyPayment) {</a>

    let loanTerm = values.loanTerm;
    let month = 1;
    let balance = (values.loanAmount);
    let interest = 0;
    let totalInterest = 0;
    let principal = 0;
    let amortizationArray = [];

    let amortizationObject = {
        termMth: Number(month).toFixed(2),
        bomBalance: balance,
        get interest() { return Number(this.bomBalance * (values.interestRate / 1200)) },
        get principal() { return Number(totalMonthlyPayment - this.interest) },
        get eomBalance() { return Number(this.bomBalance - this.principal) },

    }

    while (month <= loanTerm) {

        amortizationObject = {
            termMth: Number(month).toFixed(2),
            bomBalance: balance,
            get interest() { return Number(this.bomBalance * (values.interestRate / 1200)) },
            get principal() { return Number(totalMonthlyPayment - this.interest) },
            get eomBalance() { return Number(this.bomBalance - this.principal) },
        }


        interest = amortizationObject.interest;
        principal = amortizationObject.principal
        balance = amortizationObject.eomBalance;

        totalInterest += interest;

        amortizationObject.totalInterest = totalInterest;
        amortizationObject.tmp = totalMonthlyPayment;


        month = month + 1;

        amortizationArray.push(amortizationObject)

    }

    return amortizationArray;

}


// Display onto Page Function

<a href="#dCMSection" class="text-decoration-none" id="dCMCode">function displayCurrentMonth(amortizationArray, totalMonthlyPayment, inputsObject) {</a>
    let firstMonthTMP = document.getElementById('firstMonthTMP');
    let firstMonthPrincipal = document.getElementById('firstMonthPrincipal');
    let firstMonthInterest = document.getElementById('firstMonthInterest');
    let firstMonthTotalCost = document.getElementById('firstMonthTotalCost')
    let totalInterest = (amortizationArray[inputsObject.loanTerm - 1].totalInterest);

    firstMonthTMP.textContent = Number(totalMonthlyPayment).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
    firstMonthPrincipal.textContent = Number(amortizationArray[0].bomBalance).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
    firstMonthInterest.textContent = Number(amortizationArray[inputsObject.loanTerm - 1].totalInterest).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
    firstMonthTotalCost.textContent = Number(inputsObject.loanAmount + totalInterest).toLocaleString('en-US', { style: 'currency', currency: 'USD' });

}



<a href="dAmorSection" class="text-decoration-none" id="dAmorCode">function displayAmortization(amortizationArray) {</a>
    let tableBody = document.getElementById('tableBody');
    const amortizationTemplate = document.getElementById('amortizationTemplate');

    tableBody.innerHTML = '';

    let amorBtn = document.getElementById('amortizationBtn')
    amorBtn.classList.remove('invisible');

    let bottomHalf = document.getElementById('bottomHalf')

    bottomHalf.classList.remove('invisible');







    for (i = 0; i < amortizationArray.length; i++) {
        let amortizationRow = document.importNode(amortizationTemplate.content, true);
        let currentMth = amortizationArray[i];

        let tableCells = amortizationRow.querySelectorAll("td");

        tableCells[0].textContent = parseInt(currentMth.termMth);
        tableCells[1].textContent = Number(currentMth.tmp).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
        tableCells[2].textContent = Number(currentMth.principal).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
        tableCells[3].textContent = Number(currentMth.interest).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
        tableCells[4].textContent = currentMth.totalInterest.toLocaleString('en-US', { style: 'currency', currency: 'USD' });
        tableCells[5].textContent = Math.abs(currentMth.eomBalance).toLocaleString('en-US', { style: 'currency', currency: 'USD' });

        tableBody.appendChild(amortizationRow);

    }


}
                    </code>
                </pre>

            </div>
            <!-- Code Description -->
            <div class="col col-12 col-md-4">
                <p>The code is structured in five functions. Called functions will be detailed in their own sections.
                    Click a <code class="language-js">headline()</code> to scroll to that section of the code. And click
                    the function name to scroll to the write up.</p>
                <a href="#getValuesCode">
                    <h4 id="getValuesSection"><code class="language-js">getValues()</code></h4>
                </a>
                <p><code>getValues()</code> is our Entry Point function. First and foremost it does what it says on the
                    label. I create a variable and name it <code>inputsObject</code> and assign to it three properties
                    <code>loanAmount:<br />
                        loanTerm:<br />
                        interestRate:</code><br />

                    These properties are each assigned the value of an input from the page while also being converted
                    into an integer. This is done in a few parts. It starts with <code class=>parseInt()</code> which is
                    a function that takes a string passed into it<small> (everything grabbed from the document comes in
                        as a string)</small> and
                    converts it into an integer. Then <code>document.getElementById('')</code> is used to communicate
                    with our HTML page(document) and then grab an assigned ID. We conclude with a .value to grab the
                    user input (or assigned) value of the input field.
                </p>
                <p>Sometimes however, a user does a thing you don't want them to do, so we have to check to make sure
                    that what they've input is a number. This brings us to our if statement.
                    <code>if(conditons){code}</code> is the syntax for an if statement. We give it conditions within the
                    parentheses and code to execute in the curly brackets. For this one we give three possible
                    conditions. They all work the same and are separated by the logical OR operator(||). Let's go over
                    the syntax.
                    <code>isNaN()</code> is a function that takes an argument and determines if it is a number. We
                    pass in each of our inputs into one of this isNaN functions and check them. If either of them is not
                    a number we give the user a Sweet Alert to keep them from being confused.
                </p>
                <p>After all of that, we call in a few more functions and assign a few more variables to do the logic
                    and display of our amortization data. First we create the <code>totalMonthlyPayment</code> variable
                    and assign to that the returned value from the
                    <code>totalMonthly()</code> function
                    which has the
                    <code>inputsObject</code> passaed into it from above. Another variable,
                    <code>amortizationDataArray</code>, is created and assigned ot it is the output returned from our
                    major calulation function <code>balanceInterestPrin</code> which has the variables
                    <code>inputsObject</code> and <code>totalMonthlyPayment</code> passed into it. Much the same happens
                    with the next two called functions. These are our display functions that push all this data onto the
                    document.
                </p>
                <a href="#totalMonthlyCode" class="text-decoration-none">
                    <h4 id="totalMonthlySection"><code class="language-js">totalMonthly();</code></h4>
                </a>
                <p><code>totalMonthly(values)</code> is a simple function that calculates the total payment for each
                    month and returns that. It runs only that formula given the data that was input by the user. The
                    values parameter is the inputObject object with the contained user input. This parameter is poorly
                    named, and would be better served as being titled inputsObject. </p>

                <a href="#bIPCode" class="text-decoration-none" id="bIPSection">
                    <h4 id="balanceInterestPrinSection"><code class="language-js">balanceInterestPrin()</code></h4>
                </a>
                <p><code>balanceInterestPrin(values,totalMonthlyPayment)</code> This is the foundation; the main body of
                    logic for this entire loan calculator.</p>
                <p>First, we declare the variables necessary to do the calculations for the different aspects of the
                    amortization schedule. These are the remaining balance, the interest, total interest, and the
                    principal payment. Then, an empty array is created as that will be where we store the objects
                    created by our while loop. </p>
                <p>
                    Next, I create the initial assignment of the 'amortization object' which will hold the values and
                    calculations of our amortization schedule.
                </p>
                <p>
                    The while loop is our factory. This bad boy runs through every month of our amortization
                    schedule. We assign the amortizationObject again with the same parameters since we want that
                    original initilization except now we can reference inside of itself. We grab the
                    termMth value whih is simply the term of our loan. Then our beginning of month balance(bomBalance)
                    which is just the balance variable passsed in from outside of the loop.
                </p>
            </div>
        </div>

    </main>
    <footer class="container-fluid py-2">
        <div class="row align-items-center footer-main">
            <div class="col container">
                <div class="row align-items-center gy-2 my-1">
                    <div
                        class="col d-flex justify-content-center justify-content-md-start order-last order-md-first footer-Text">
                        &copy; 2023 Vannerick Kraken
                    </div>
                    <div class="col d-flex justify-content-center">
                        <img src="/img/Kraken-Footer-Logo.svg" height="50" />
                    </div>
                    <div class="col-12 col-md d-flex justify-content-center justify-content-md-end">
                        <a href="#" target="_blank" class="socialIcons"><i class="bi bi-linkedin p-2"></i></a>
                        <a href="#" target="_blank" class="socialIcons"><i class="bi bi-envelope-at p-2"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- PrismJS -->
    <script src="/js/prism.js"></script>
    <script>
        Prism.plugins.NormalizeWhitespace.setDefaults({
            'remove-trailing': true,
            'remove-indent': true,
            'left-trim': true,
            'right-trim': true
        })
    </script>

    <!-- BOOTSTRAP JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <!-- CUSTOM JS  -->
    <script scr="/js/site.js"></script>

</body>

</html>